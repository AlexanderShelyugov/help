{{ define "main" }}
<nav class="sidemenu hide-sm">
	<a href="." title="Search" onClick="startSearch(event)">
		<i class="icon icon-search"></i>
		<span>Search</span>
		<span class="hide-sm">&nbsp;(press 'S' to search)</span>
	</a>

	{{- $docs := $.GetPage $.Section }}
	<a href="{{ $docs.RelPermalink }}"
		{{- if eq . $docs }} class="active"{{ end -}}
	>{{ $docs.Title }}</a>

	{{- range where $docs.Pages "IsNode" false }}
	<a href="{{ .RelPermalink }}"
		{{- if eq . $.Page }} class="active"{{ end -}}
	>{{ .Title }}</a>
	{{- end }}

	{{- range $docs.Sections }}
	<details {{ if eq $.Page.CurrentSection .CurrentSection }}open{{ end }}>
		<summary class="icon icon-arrow">{{ .Title }}</summary>
		<nav>
			{{- range where .Pages "IsPage" true }}
			<a href="{{ .RelPermalink }}"
				{{- if eq . $.Page }} class="active"{{ end -}}
			>{{ .Title }}</a>
			{{- end }}
		</nav>
	</details>
	{{- end }}
</nav>

<article class="flex-expand">
<h1>{{ .Title }}{{ partial "edit-page" . }}</h1>
{{ .Content }}
</article>
{{ end }}


{{ define "tail" }}
<script src="/assets/js/fuse.min.js"></script>
<script src="/assets/js/search.js"></script>
{{ end }}
