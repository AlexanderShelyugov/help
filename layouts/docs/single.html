{{ define "main" }}
<nav class="sidemenu hide-sm">
	{{- $docs := $.GetPage $.Section }}
	<a href="{{ $docs.RelPermalink }}"
		{{- if eq . $docs }} class="active"{{ end -}}
	>{{ $docs.Title }}</a>

	{{- range where $docs.Pages "IsNode" false }}
	<a href="{{ .RelPermalink }}"
		{{- if eq . $.Page }} class="active"{{ end -}}
	>{{ .Title }}</a>
	{{- end }}

	{{- range $docs.Sections }}
	<details {{ if eq $.Page.CurrentSection .CurrentSection }}open{{ end }}>
		<summary class="icon">{{ .Title }}</summary>
		<nav>
			{{- range where .Pages "IsPage" true }}
			<a href="{{ .RelPermalink }}"
				{{- if eq . $.Page }} class="active"{{ end -}}
			>{{ .Title }}</a>
			{{- end }}
		</nav>
	</details>
	{{- end }}
</nav>

<article class="flex-expand">
<h1>{{ .Title }}{{ partial "edit-page" . }}</h1>
{{ .Content }}

<nav class="sticky">
<a href="." class="only-sm icon icon-menu" title="Toggle Menu" onClick="event.preventDefault(),document.body.classList.toggle('show-sidemenu')"></a>
{{- with $.GetPage "search" }}
<a href="{{ .RelPermalink }}" class="icon icon-search" title="Search"></a>
{{- end }}
</nav>
</article>
{{ end }}
