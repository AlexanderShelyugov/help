{{ define "main" }}
<nav class="sidemenu hide-sm">
	<div class="search">
		<input id="search-input" type="search" placeholder="Click or press 'S' to search..." />
		<div id="search-result"></div>
	</div>

	{{- $docs := $.GetPage $.Section }}
	<a href="{{ $docs.RelPermalink }}"
		{{- if eq . $docs }} class="active"{{ end -}}
	>{{ $docs.Title }}</a>

	{{- range where $docs.Pages "IsNode" false }}
	<a href="{{ .RelPermalink }}"
		{{- if eq . $.Page }} class="active"{{ end -}}
	>{{ .Title }}</a>
	{{- end }}

	{{- range where $docs.Sections "Params.skip" "ne" true  }}
	<details {{ if eq $.Page.CurrentSection .CurrentSection }}open{{ end }}>
		<summary class="icon">{{ .Title }}</summary>
		<nav>
			{{- range where .Pages "IsPage" true }}
			<a href="{{ .RelPermalink }}"
				{{- if eq . $.Page }} class="active"{{ end -}}
			>{{ .Title }}</a>
			{{- end }}
		</nav>
	</details>
	{{- end }}
</nav>

<article class="flex-expand">
<h1>{{ .Title }}{{ partial "edit-page" . }}</h1>
{{ .Content }}

<nav class="sticky">
<a
	href="."
	class="only-sm icon icon-menu"
	title="Toggle Menu"
	onClick="event.preventDefault(), event.target.classList.toggle('icon-menu'), event.target.classList.toggle('icon-close'), document.body.classList.toggle('show-sidemenu')"
></a>
</nav>
</article>
{{ end }}

{{ define "scripts" }}
<script src="/assets/js/lunr.min.js"></script>
<script src="/assets/js/search.js"></script>
{{ end }}
